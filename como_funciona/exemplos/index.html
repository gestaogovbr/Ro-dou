<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Exemplos - Ro-DOU - ferramenta de clipping dos diários oficiais</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Exemplos";
        var mkdocs_page_input_path = "como_funciona/exemplos.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script>
   
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">

  <!-- keep default homepage -->
  
          <a href="../.." class="icon icon-home"> Ro-DOU - ferramenta de clipping dos diários oficiais
        </a>
  <!-- Custom icons -->
  <a href="https://github.com/gestaogovbr/Ro-dou/" target="_blank" class="icon fa-github"></a>
  <a href="https://discord.gg/8R6bS5D2KN" target="_blank" class="icon fa-discord"></a>
  <a href="https://www.youtube.com/playlist?list=PLpqT2wQe19o2zJ7NJJm96Gpc5PbSWJQ_Q" target="_blank" class="icon fa-youtube"></a>


        <div class="version">
          versão atual: 0.9.0
        </div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Página Inicial</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../definicao/rodou/">O que é Ro-DOU?</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Como utilizar</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../como_utilizar/intro_utilizacao/">Introdução</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../como_utilizar/instalacao/">Instalação e configuração</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../como_utilizar/instalacao_k8s/">Instalação do k8s</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../como_utilizar/instalacao_wsl_windows/">Instalação do WSL no Windows</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../como_utilizar/habilitacao_docker_no_wsl/">Habilitação do Docker no WSL</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../como_utilizar/usuarios/">Usuários internos e externos</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../como_utilizar/notificacao_de_erros/">Notificação de erros</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Como funciona</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../intro_funcionamento/">Introdução</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../pesquisa_dou/">Compreendendo a pesquisa no D.O.U.</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../recursos_funcionalidades/">Recursos e funcionalidades</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../parametros/">Parâmetros de pesquisa</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../operadores/">Operadores de pesquisa avançada</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Exemplos</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#exemplo-1">Exemplo 1</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exemplo-2">Exemplo 2</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exemplo-3">Exemplo 3</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exemplo-4">Exemplo 4</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exemplo-5">Exemplo 5</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exemplo-6">Exemplo 6</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exemplo-7">Exemplo 7</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exemplo-8-depreciado">Exemplo 8 (Depreciado)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exemplo-9-depreciado">Exemplo 9 (Depreciado)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exemplo-10">Exemplo 10</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exemplo-11">Exemplo 11</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exemplo-12">Exemplo 12</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exemplo-13">Exemplo 13</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exemplo-14">Exemplo 14</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exemplo-15">Exemplo 15</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exemplo-16">Exemplo 16</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exemplo-17">Exemplo 17</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exemplo-18">Exemplo 18</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exemplo-19">Exemplo 19</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exemplo-19_1">Exemplo 19</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exemplo-20">Exemplo 20</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tipos_de_publicacoes/">Modelos de publicações</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Como contribuir</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../como_contribuir/contribuicoes/">Contribuições</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Oficinas e mídias</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../oficinas_midias/oficinas_midias/">Conteúdos sobre o Ro-DOU</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Outros</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../outros/faq/">FAQ</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../outros/links/">Links relevantes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../outros/contato/">Contato</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">CHANGELOG</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../changelog/changelog/">Changelog</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Ro-DOU - ferramenta de clipping dos diários oficiais</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Como funciona</li>
      <li class="breadcrumb-item active">Exemplos</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="exemplos-de-configuracao-do-arquivo-yaml">Exemplos de configuração do arquivo YAML</h2>
<p>Neste segmento, você encontrará uma série de exemplos práticos de utilização do Ro-DOU. A leitura dos exemplos ajudará a visualizar de que maneira o Ro-DOU pode ser utilizado.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/L6wlMqLlNBs?si=1n3qs7AZjxYfJWoh" title="Explorando as Dags do Ro-DOU com Exemplos Práticos" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

<h3 id="exemplo-1">Exemplo 1</h3>
<p>A configuração a seguir cria uma DAG que realiza a pesquisa <strong>diária</strong> dos
<strong>6 termos listados</strong> e envia o relatório para o <strong>e-mail</strong> fornecido.</p>
<pre><code class="language-yaml">dag:
  id: pesquisa_dou_termos_interesse_nitai
  description: Pesquisa termos de interesse de Nitai.
  search:
    terms:
      - dados abertos
      - governo aberto
      - engenharia de dados
      - software livre
      - código aberto
      - open source
  report:
    emails:
      - endereco@dominio.com
</code></pre>
<h3 id="exemplo-2">Exemplo 2</h3>
<p>A configuração a seguir realiza a pesquisa diária de <strong>segunda-feira a sexta-feira, 8AM</strong>, apenas na <strong>Seção 1 e na Edição Suplementar</strong> e envia o resultado em <strong>formato CSV</strong>, anexado ao e-mail. O parâmetro <code>schedule</code>
aceita valores CRON.</p>
<pre><code class="language-yaml">dag:
  id: dag_id_deve_ser_unico_em_todo_airflow
  description: DAG exemplo de monitoramento no DOU.
  schedule: 0 8 * * MON-FRI
  search:
    terms:
      - alocação
      - realoca
      - permuta
      - estrutura regimental
      - organização básica
    dou_sections:
      - SECAO_1
      - EDICAO_SUPLEMENTAR
  report:
    emails:
      - dest1@gestao.gov.br
      - dest2@gestao.gov.br
    attach_csv: True
    subject: Assunto do Email
</code></pre>
<p>Note que aqui são utilizados os parâmetros opcionais <code>schedule</code>,
<code>dou_section</code> e <code>attach_csv</code>.</p>
<h3 id="exemplo-3">Exemplo 3</h3>
<p>A configuração a seguir utiliza o parâmetro <code>from_db_select</code> em <code>terms</code>, que torna dinâmica a parametrização dos termos para pesquisa. Note também a inclusão de <code>tags</code> que ajudam na organização e na busca das DAGs no Airflow.</p>
<pre><code class="language-yaml">dag:
  id: dag_ultra_dinamica
  description: A pesquisa depende do select SQL.
  tags:
    - projeto_a
    - departamento_x
  search:
    terms:
      from_db_select:
        sql: SELECT text FROM schema.tabela;
        conn_id: airflow_conn_id
  report:
    emails:
      - email-destino@gestao.gov.br
    subject: &quot;[String] com caracteres especiais deve estar entre aspas&quot;
</code></pre>
<h3 id="exemplo-4">Exemplo 4</h3>
<p>A configuração a seguir utiliza o parâmetro <code>from_airflow_variable</code> em <code>terms</code>, que também carrega dinamicamente a lista de termos. Neste caso, há a recuperação a partir de uma <strong>variável do Airflow</strong>. Aqui, também é utilizado o campo <code>field</code> para limitar as pesquisas ao campo título das publicações no Diário Oficial da União.</p>
<pre><code class="language-yaml">dag:
  id: pesquisa_a_lista_na_variavel
  description: É fácil editar a variável na interface do Airflow.
  search:
    terms:
      from_airflow_variable: nome_da_variavel_no_airflow
    field: TITULO
  report:
    emails:
      - email-destino@gestao.gov.br
    skip_null: False
</code></pre>
<p>Caso não encontre nenhum resultado, será enviado um e-mail informando que
nenhum termo foi encontrado.</p>
<h3 id="exemplo-5">Exemplo 5</h3>
<p>A configuração a seguir produz uma DAG que executa apenas <strong>uma vez por mês</strong>, no dia 1 às 8 AM, como pode ser visto no <code>schedule</code>. Simultaneamente, a pesquisa no Diário Oficial da União é realizada nos diários oficiais do <strong>último mês</strong> inteiro, através do uso do parâmetro <code>date</code>. Aqui, também é utilizado o parâmetro <code>is_exact_search</code>
com valor <code>False</code> para utilizar uma pesquisa aproximada.</p>
<p>Apesar do fato de que o termo buscado "paralelpip<strong>i</strong>do" contenha um erro ortográfico, a busca retorna os resultados corretos. <a href="https://www.in.gov.br/consulta/-/buscar/dou?q=ddm__text__21040__texto_pt_BR-paralelepipido&amp;s=todos&amp;exactDate=ano&amp;sortType=0">Veja!</a></p>
<pre><code class="language-yaml">dag:
  id: relatorio_mensal_do_dou
  description: Envia um numero menor de emails.
  schedule: 0 8 1 * *
  search:
    terms:
      - paralelpipido
    date: MES
    is_exact_search: False
  report:
    emails:
      - email-destino@gestao.gov.br
</code></pre>
<h3 id="exemplo-6">Exemplo 6</h3>
<p>A configuração a seguir produz uma DAG que pesquisa no Querido Diário pelos termos "pandemia", "dados pessoais" e "prefeitura", buscando apenas os resultados do Diário Oficial de Belo Horizonte. Para conhecer o Querido Diário, acesse
<a href="https://queridodiario.ok.org.br/">https://queridodiario.ok.org.br/</a>.</p>
<pre><code class="language-yaml">dag:
  id: dou_qd_example
  description: DAG de teste
  search:
    sources:
    - QD
    territory_id: 3106200 # Belo Horizonte
    terms:
      - pandemia
      - prefeitura
      - '&quot;dados pessoais&quot;'
      - '&quot;Software+valor&quot;~100'
      - '&quot;\&quot;Alimentação escolar\&quot;+valor&quot;~100'
    is_exact_search: False
    number_of_excerpts: 5
    excerpt_size: 500
  report:
    emails:
      - destination@gestao.gov.br
    attach_csv: True
    subject: &quot;Teste do Ro-dou&quot;
</code></pre>
<h3 id="exemplo-7">Exemplo 7</h3>
<p>A configuração a seguir produz uma DAG exatamente igual ao exemplo básico, mas adiciona uma descrição longa do que a DAG faz, usando o parâmetro
<code>doc_md</code>. Essa descrição pode conter formatação markdown, incluindo
títulos, listas, links etc.</p>
<p>Além disso, acrescenta também uma referência ao nome do arquivo que
gerou a DAG, bem como os seus parâmetros.</p>
<pre><code class="language-yaml">dag:
  id: markdown_docs_example
  description: DAG com documentação em markdown
  search:
    terms:
    - dados abertos
    - governo aberto
    - lei de acesso à informação
  report:
    emails:
      - destination@gestao.gov.br
    subject: &quot;Teste do Ro-dou&quot;
  doc_md: &gt;-
    ## Ola!

    Esta é uma DAG de exemplo com documentação em markdown. Esta
    descrição é opcional e pode ser definida no parâmetro `doc_md`.

      * Ah, aqui você também pode usar *markdown* para
      * escrever listas, por exemplo,
      * ou colocar [links](graph)!
</code></pre>
<p>Para ver essa documentação, basta clicar o botão "DAG Docs" em qualquer
tela de visualização da DAG no Airflow.</p>
<p><img alt="Botão &quot;DAG Docs&quot;. Captura de tela da documentação de DAG no Airflow." src="https://github.com/gestaogovbr/Ro-dou/blob/main/docs/img/exemplo-dag-doc_md.png?raw=true" /></p>
<h3 id="exemplo-8-depreciado">Exemplo 8 (Depreciado)</h3>
<p>!!! warning "Depreciado"
    Este exemplo utiliza a configuração <code>discord</code> que foi <strong>depreciada</strong>.
    Utilize o parâmetro <code>notification</code> com URLs do <a href="https://github.com/caronc/apprise">Apprise</a>
    conforme o <strong>Exemplo 10</strong>.</p>
<p>Esta configuração envia as notificações para canais Discord. É necessário ter
permissões de administrador no Discord para gerar o Webhook:</p>
<pre><code class="language-yaml">dag:
  id: discord_example
  description: Envia notificações para canal Discord
  search:
    terms:
    - manifestação cultural
    - expressão cultural
    - política cultural
  report:
    report:
    discord:
      webhook: https://discord.com/api/webhooks/105220xxxxxx811250/Q-XsfdnoHtudTQ-8A6zzzzznitai-vi0bGLE7xxxxxxxxxxxxxxxxxxxmx94R3oZ1h0ngl1
</code></pre>
<h3 id="exemplo-9-depreciado">Exemplo 9 (Depreciado)</h3>
<p>!!! warning "Depreciado"
    Este exemplo utiliza a configuração <code>slack</code> que foi <strong>depreciada</strong>.
    Utilize o parâmetro <code>notification</code> com URLs do <a href="https://github.com/caronc/apprise">Apprise</a>
    conforme o <strong>Exemplo 10</strong>.</p>
<p>Esta configuração envia as notificações para canais Slack. É necessário ter
permissões de administrador no Slack para gerar o Webhook:</p>
<pre><code class="language-yaml">dag:
  id: slack_example
  description: Envia notificações para canal Slack
  search:
    terms:
    - manifestação cultural
    - expressão cultural
    - política cultural
  report:
    slack:
      webhook: https://hooks.slack.com/services/XXXXXXXX/XXXXNFDXXX/n6QXXXXrPwxQ71ZXXXXXT9
</code></pre>
<h3 id="exemplo-10">Exemplo 10</h3>
<p>Esta configuração possibilita o envio de notificações através de múltiplos canais
utilizando o parâmetro <code>notification</code>. O Ro-DOU emprega a biblioteca
<a href="https://github.com/caronc/apprise">Apprise</a> para realizar o envio de notificações.
Por meio dela, é possível estabelecer integração com diversos serviços de
comunicação como Slack, Discord, Telegram, Microsoft Teams, entre outros.</p>
<p>O parâmetro <code>notification</code> recebe uma lista de URLs no formato do Apprise.
Para consultar os formatos de URL suportados, acesse a
<a href="https://github.com/caronc/apprise/wiki">documentação do Apprise</a>.</p>
<pre><code class="language-yaml">dag:
  id: notification_example
  description: Envia notificações para múltiplos canais com Apprise
  search:
    terms:
    - manifestação cultural
    - expressão cultural
    - política cultural
  report:
    notification:
      - slack://TokenA/TokenB/TokenC
      - discord://WebhookID/WebhookToken
      - tgram://bot_token/chat_id
</code></pre>
<h3 id="exemplo-11">Exemplo 11</h3>
<p>Esta configuração filtra os resultados por órgão/unidade selecionados.
Por enquanto disponível apenas para as pesquisas no DOU.</p>
<pre><code class="language-yaml">dag:
  id: department_example
  description: DAG de teste (filtro por departamento)
  search:
    terms:
      - dados abertos
    department:
      - Ministério da Gestão e da Inovação em Serviços Públicos
      - Ministério da Defesa
  report:
    emails:
      - destination@gestao.gov.br
    subject: &quot;Teste do Ro-dou&quot;
</code></pre>
<h3 id="exemplo-12">Exemplo 12</h3>
<p>Esta configuração permite múltiplas buscas utilizando o mesmo arquivo.
O Ro-dou permite numa mesma busca juntar resultados do DOU e Querido Diário.</p>
<pre><code class="language-yaml">dag:
  id: multiple_searchs_example
  description: DAG de teste com múltiplas buscas
  search:
    - header: &quot;Pesquisa no DOU&quot;
      sources:
        - DOU
      terms:
        - dados abertos
        - governo aberto
        - lei de acesso à informação
      force_rematch: On
      ignore_signature_match: On
    - header: &quot;Pesquisa no QD&quot;
      sources:
        - QD
      terms:
        - dados abertos
        - governo aberto
        - lei de acesso à informação
      force_rematch: On
      ignore_signature_match: On
    - header: &quot;Pesquisa no DOU e QD (misto)&quot;
      sources:
        - DOU
        - QD
      terms:
        - dados abertos
        - governo aberto
        - lei de acesso à informação
      force_rematch: On
      ignore_signature_match: On
  report:
    emails:
      - destination@gestao.gov.br
    subject: &quot;Teste do Ro-dou&quot;
</code></pre>
<h3 id="exemplo-13">Exemplo 13</h3>
<p>Esta configuração filtra os resultados por tipos de publicações selecionadas.
Disponível para as pesquisas no DOU e INLABS.</p>
<pre><code class="language-yaml">dag:
  id: pubtype_example
  description: DAG de teste (filtro por tipo de publicação)
  search:
    sources:
      - DOU
    terms:
      - programa
    pubtype:
      - Ato
      - Portaria
      - Edital
      - Extrato
      - Ratificação
      - Resolução
      - Retificação
      - Protocolo
  report:
    emails:
      - destination@gestao.gov.br
    subject: &quot;Teste do Ro-dou&quot;
</code></pre>
<h3 id="exemplo-14">Exemplo 14</h3>
<p>Esta dag recebe e lista dados de múltiplos territórios para busca no Querido Diário.</p>
<pre><code class="language-yaml">dag:
  id: qd_list_territory_id_example
  description: DAG de teste com múltiplos territory_id
  schedule: 0 8 * * MON-FRI
  search:
    header: &quot;Teste com múltiplos territory_id&quot;
    territory_id:
      - 3300100
      - 3300159
      - 3300209
      - 3305703
    sources:
      - QD
    terms:
      - LGPD
      - RIO DE JANEIRO
      - DADOS PESSOAIS
    is_exact_search: True
    number_of_excerpts: 5
    excerpt_size: 500
  report:
    emails:
      - destination@economia.gov.br
    subject: &quot;Teste do Ro-dou&quot;
    skip_null: False
</code></pre>
<h3 id="exemplo-15">Exemplo 15</h3>
<p>Realiza as busca de termos a partir de uma fonte de um banco SGBD externo, possibilitando assim que os termos de buscas sejam dinâmicos.</p>
<pre><code class="language-yaml">dag:
  id: terms_from_db_example
  description: DAG de teste
  search:
    terms:
      from_db_select:
        sql: &gt;
          SELECT 'cloroquina' as TERMO, 'Ações inefetivas' as GRUPO
          UNION SELECT 'ivermectina' as TERMO, 'Ações inefetivas' as GRUPO
          UNION SELECT 'vacina contra covid' as TERMO, 'Ações efetivas' as GRUPO
          UNION SELECT 'higienização das mãos' as TERMO, 'Ações efetivas' as GRUPO
          UNION SELECT 'uso de máscara' as TERMO, 'Ações efetivas' as GRUPO
          UNION SELECT 'distanciamento social' as TERMO, 'Ações efetivas' as GRUPO
        conn_id: example_database_conn
    date: MES
  report:
    emails:
      - destination@economia.gov.br
    attach_csv: True
    subject: &quot;[String] com caracteres especiais deve estar entre aspas&quot;
</code></pre>
<h3 id="exemplo-16">Exemplo 16</h3>
<p>Esta dag coleta e realiza pesquisas de dados do inlabs.</p>
<pre><code class="language-yaml">dag:
  id: inlabs_example
  description: DAG de teste
  tags:
    - inlabs
  schedule: 0 8 * * MON-FRI
  dataset: inlabs
  owner:
    - ro-dou
  search:
    sources:
    - INLABS
    terms:
      - tecnologia
      - informação
    use_summary: True
  report:
    emails:
      - destination@economia.gov.br
    attach_csv: True
    subject: &quot;Teste do Ro-dou&quot;
</code></pre>
<h3 id="exemplo-17">Exemplo 17</h3>
<p>Esta dag realiza pesquisas com parâmetros de busca avançados quando a fonte é INLABS.</p>
<pre><code class="language-yaml">dag:
  id: inlabs_advanced_search_example
  description: DAG de teste
  tags:
    - inlabs
  dataset: inlabs
  owner:
    - ro-dou
  search:
    sources:
    - INLABS
    terms:
    - designar &amp; ( MGI | MINISTÉRIO FAZENDA)
    - instituto &amp; federal ! paraná
  report:
    emails:
      - destination@economia.gov.br
    attach_csv: True
    subject: &quot;Teste do Ro-dou&quot;
</code></pre>
<h3 id="exemplo-18">Exemplo 18</h3>
<p>Esta dag é utilizada para ocultar filtros de pesquisa de texto e outros metadados.</p>
<pre><code class="language-yaml">dag:
  id: hide_filters_example
  description: DAG de teste
  tags:
    - inlabs
  owner:
    - ro-dou
  schedule: 0 8 * * MON-FRI
  search:
    header: HEADER TEXT
    sources:
    - INLABS
    terms:
    - tecnologia
    - informação
    department:
      - Ministério da Gestão e da Inovação em Serviços Públicos
      - Ministério da Defesa
  report:
    emails:
      - destination@economia.gov.br
    attach_csv: True
    subject: &quot;Teste do Ro-dou&quot;
    hide_filters: True
</code></pre>
<h3 id="exemplo-19">Exemplo 19</h3>
<p>Esta dag é utilizada quando nenhum termo é definido (obrigatório informar tipo de
publicação ou órgão/unidade).</p>
<pre><code class="language-yaml">dag:
  id: no_terms_example
  description: DAG de teste sem termos definidos
  search:
    sources:
    - INLABS
    department:
      - Ministério da Gestão e da Inovação em Serviços Públicos
    pubtype:
      - Portaria
      - Resolução
    dou_sections:
      - SECAO_1
  report:
    emails:
      - destination@economia.gov.br
    subject: &quot;Teste do Ro-dou - Todas as Portarias e Resoluções do MGI&quot;
</code></pre>
<h3 id="exemplo-19_1">Exemplo 19</h3>
<p>Esta configuração envia as notificações de falhas na execução da DAG para
uma lista de email específica.</p>
<pre><code class="language-yaml">dag:
  id: no_terms_example
  description: DAG de callback
  callback:
    on_failure_callback:
    - departamentodeti@economia.gov.br
  search:
    sources:
    - INLABS
    terms:
    - tecnologia
    - informação
  report:
    emails:
      - destination@economia.gov.br
    subject: &quot;Teste do Ro-dou - Envia callback para email nas falhas&quot;
</code></pre>
<h3 id="exemplo-20">Exemplo 20</h3>
<p>Esta configuração permite que seja configurado uma lista de termos a serem ignorados
na busca. No exemplo abaixo serão ignorados as publicações que tiverem o termo "deputados"
no corpo do texto.</p>
<pre><code class="language-yaml">dag:
  id: terms_ignore_example
  description: DAG de exemplo com termos ignorados
  dataset: inlabs
  search:
    sources:
    - INLABS
    terms:
    - câmara
    terms_ignore:
    - deputados
  report:
    emails:
      - destination@economia.gov.br
    subject: &quot;Teste do Ro-dou - Termos ignorados&quot;
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../operadores/" class="btn btn-neutral float-left" title="Operadores de pesquisa avançada"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../tipos_de_publicacoes/" class="btn btn-neutral float-right" title="Modelos de publicações">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../operadores/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../tipos_de_publicacoes/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
