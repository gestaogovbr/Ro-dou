<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page_title | default('Pesquisa DOU') }}</title>
    <style>
        * {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            line-height: 1.6;
            color: #333;
        }

        h3 {
            color: #545b61;
            font-size: 16px;
        }

        .truncate {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 800px;
        }

        .head_text {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            font-size: 18px;
            color: #6c757d;
            border-top: 1px solid #e9ecef;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .container+.container {
            margin-top: 20px;
        }

        .header {
            background: linear-gradient(135deg, #06acff, #0056b3);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            margin: 0;
            font-size: 28px;
            font-weight: 600;
        }

        .content {
            padding: 30px;
        }

        /* Seção de Filtros */
        .filters-section {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            border-left: 4px solid #06acff;
        }

        .filter-title {
            color: #06acff;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
            text-transform: uppercase;
        }

        .filter-subtitle {
            font-weight: 600;
            margin: 15px 0 8px 0;
            color: #495057;
        }

        .filter-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 5px;
            margin: 0;
            padding: 0;
        }

        .filter-list li {
            list-style: none;
            padding: 3px 0;
            font-size: 14px;
            color: #666;
        }

        .filter-list li::before {
            content: "• ";
            color: #06acff;
            font-weight: bold;
        }

        /* Seção de Resultados */
        .results-section {
            margin-top: 30px;
        }

        .result-item {
            border: 1px solid #e9ecef;
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden;
            transition: box-shadow 0.3s ease;
        }

        .result-item:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .result-header {
            background-color: #06acff;
            color: white;
            padding: 15px 20px;
            font-weight: 600;
            font-size: 16px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            cursor: help;
            position: relative;
        }

        .result-header:hover::after {
            content: attr(title);
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background-color: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 10px;
            border-radius: 4px;
            font-size: 14px;
            font-weight: normal;
            z-index: 1000;
            white-space: normal;
            line-height: 1.4;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .result-body {
            padding: 20px 5px;
        }

        .section-marker,
        .group-marker {
            color: #06acff;
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
            background-color: #e3f2fd;
            padding: 4px 0px;
            border-radius: 4px;
        }

        .group-marker {
            margin: 0 4px 0 0;
        }

        .document-link {
            display: block;
            color: #0056b3;
            text-decoration: none;
            font-weight: 600;
            font-size: 18px;
            margin: 10px 0;
            transition: color 0.3s ease;
        }

        .document-link:hover {
            color: #003d82;
            text-decoration: underline;
        }

        .document-link:visited {
            color: #8e44ad;
        }

        .abstract {
            background-color: #f8f9fa;
            padding: 10px 0;
            border-radius: 6px;
            margin: 15px 0;
            text-align: justify;
            font-size: 16px;
            line-height: 1.5;
        }

        .highlight {
            background-color: #fff3cd;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }

        .date {
            color: #6c757d;
            font-size: 14px;
            font-weight: 500;
            text-align: right;
            margin-top: 10px;
            padding-top: 10px;
            /* border-top: 1px solid #e9ecef; */
        }

        .footer {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            font-size: 12px;
            color: #6c757d;
            padding: 30px;
            margin-top: 5px;
            background-color: #f8f9fa;
            border-top: 1px solid #e9ecef;
        }

        .footer img {
            max-width: 200px;
            height: auto;
            margin-bottom: 10px;
        }

        .footer a {
            color: #06acff;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        .separator {
            border: none;
            height: 2px;
            background: linear-gradient(90deg, #06acff, #e9ecef, #06acff);
            margin: 30px 0;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #6c757d;
            font-size: 18px;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .container {
                margin: 0;
                border-radius: 0;
            }

            .content {
                padding: 20px;
            }

            .header {
                padding: 20px;
            }

            .header h1 {
                font-size: 24px;
            }

            .filter-list {
                grid-template-columns: 1fr;
            }

            .result-header {
                white-space: normal;
                overflow: visible;
                text-overflow: unset;
            }
        }
    </style>
</head>

<body>
    <!-- Cabeçalho opcional -->
    {% if header_text %}
    <div class="head_text">
        {{ header_text | safe }}
    </div>
    {% endif %}

    <!-- Container principal -->
    <div class="container">
        <div class="content">
            <!-- Seção de Filtros -->
            {% if filters.filters|default({})|length > 0 %}
            <section class="filters-section">
                <div class="filter-title">
                    {{ filters.title | default('Filtros Aplicados na Pesquisa') }}
                </div>

                {% for key, value in filters.items() %}
                {% if value.included_units %}
                <div class="filter-subtitle">
                    {{ value.included_units.title | default('Filtrando resultados para:') }}
                </div>
                <ul class="filter-list">
                    {% for unit in value.included_units['items'] %}
                    <li>{{ unit }}</li>
                    {% endfor %}
                </ul>
                {% endif %}

                {% if value.excluded_units %}
                <div class="filter-subtitle">
                    {{ value.excluded_units.title | default('Desconsiderar Unidades (e subordinadas):') }}
                </div>
                <ul class="filter-list">
                    {% for unit in value.excluded_units['items'] %}
                    <li>{{ unit }}</li>
                    {% endfor %}
                </ul>
                {% endif %}

                {% if value.publication_types %}
                <div class="filter-subtitle">
                    {{ value.publication_types.title | default('Tipos de publicações:') }}
                </div>
                <ul class="filter-list">
                    {% for type in value.publication_types['items'] %}
                    <li>{{ type }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
                {% endfor %}
            </section>
            {% endif %}

            <!-- Seção de Resultados -->
            <section class="results-section">
                {% if results[0].search_terms.get('terms', [])|length > 0 or
                results[0].search_terms.get('items',[])|length > 0 %}
                {% for result_group in results %}
                {% set title = result_group.search_terms.terms | join(', ') %}
                <!-- {% if loop.changed(result_group.search_terms.terms) %}
                        {% set title = result_group.search_terms.terms | join(', ') %}
                      {% endif %} -->
                <!-- Agrupamento de resultados -->
                {% for document in result_group.search_terms['items'] %}
                {% if loop.changed(document.header_title) %}
                <div class="result-header">
                    {{ document.header_title | safe }}
                </div>
                {% endif %}
                <!-- Seção body -->
                <div class="result-body">
                    {% if loop.first %}
                    <div class="group-marker">
                        {% if result_group.search_terms.group %}
                        Grupo: {{ result_group.search_terms.group | safe }}
                        {% endif %}
                    </div>
                    <h3>Resultados para: {{ title }}</h3>
                    {% endif %}
                    {% if not document.get('section') %}
                    {% if no_results_message is defined %}
                    <p>{{ no_results_message | safe }}</p>
                    {% else %}
                    <p>Nenhum resultado encontrado para os critérios de pesquisa especificados.</p>
                    {% endif %}

                    {% else %}
                    <div class="section-marker">{{ document.section | safe }}</div>

                    <a href="{{ document.url }}" class="document-link" {% if document.url_new_tab %}target="_blank" {%
                        endif %}>
                        {{ document.title }}
                    </a>

                    <div class="abstract">
                        {{ document.abstract | safe }}
                    </div>

                    <div class="date">{{ document.date }}</div>
                    {% endif %}
                    {% if not loop.last %}
                    <hr class="separator">
                    {% endif %}
                </div>
                {% endfor %}
                {% endfor %}
                {% else %}
                <div class="no-results">
                    <p>{{ no_results_message | default('Nenhum resultado encontrado para os critérios de pesquisa
                        especificados.') }}</p>
                </div>
                {% endif %}
            </section>
        </div>
    </div>

    <!-- Rodapé -->
    <div class="footer">
        {% if footer %}
        <div>{{ footer | safe }}</div>
        {% endif %}

        <a href="https://www.gov.br/gestao/pt-br/assuntos/gestaoeinovacao/ro-dou">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABDgAAACWCAYAAAA7STgCAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAE/2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSdhZG9iZTpuczptZXRhLyc+CiAgICAgICAgPHJkZjpSREYgeG1sbnM6cmRmPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjJz4KCiAgICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICAgICAgICB4bWxuczpkYz0naHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8nPgogICAgICAgIDxkYzp0aXRsZT4KICAgICAgICA8cmRmOkFsdD4KICAgICAgICA8cmRmOmxpIHhtbDpsYW5nPSd4LWRlZmF1bHQnPkPDs3BpYSBkZSBTRUktdjQtYWxlcnRhIC0gNDwvcmRmOmxpPgogICAgICAgIDwvcmRmOkFsdD4KICAgICAgICA8L2RjOnRpdGxlPgogICAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgoKICAgICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0nJwogICAgICAgIHhtbG5zOkF0dHJpYj0naHR0cDovL25zLmF0dHJpYnV0aW9uLmNvbS9hZHMvMS4wLyc+CiAgICAgICAgPEF0dHJpYjpBZHM+CiAgICAgICAgPHJkZjpTZXE+CiAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSdSZXNvdXJjZSc+CiAgICAgICAgPEF0dHJpYjpDcmVhdGVkPjIwMjQtMDktMjU8L0F0dHJpYjpDcmVhdGVkPgogICAgICAgIDxBdHRyaWI6RXh0SWQ+NTZmNjAyZjQtOGFhYS00NTZhLWIxODUtYWNmYmExYjg3MzA5PC9BdHRyaWI6RXh0SWQ+CiAgICAgICAgPEF0dHJpYjpGYklkPjUyNTI2NTkxNDE3OTU4MDwvQXR0cmliOkZiSWQ+CiAgICAgICAgPEF0dHJpYjpUb3VjaFR5cGU+MjwvQXR0cmliOlRvdWNoVHlwZT4KICAgICAgICA8L3JkZjpsaT4KICAgICAgICA8L3JkZjpTZXE+CiAgICAgICAgPC9BdHRyaWI6QWRzPgogICAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgoKICAgICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0nJwogICAgICAgIHhtbG5zOnBkZj0naHR0cDovL25zLmFkb2JlLmNvbS9wZGYvMS4zLyc+CiAgICAgICAgPHBkZjpBdXRob3I+TcO0bmljYSBIYXJhZGE8L3BkZjpBdXRob3I+CiAgICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CgogICAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgICAgICAgeG1sbnM6eG1wPSdodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvJz4KICAgICAgICA8eG1wOkNyZWF0b3JUb29sPkNhbnZhIChSZW5kZXJlcik8L3htcDpDcmVhdG9yVG9vbD4KICAgICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgICAKICAgICAgICA8L3JkZjpSREY+CiAgICAgICAgPC94OnhtcG1ldGE+C5m/dAAANW5JREFUeJzs3X14XFWdB/Bv21hKxfNrAsjLcq41mQFx7vVlW7TbABlAZQZlVRBd8IU35TWhgCB2F2zKi4pvwLbsgisrBUTwDVbRBIo0WSwglOdB5waQTGq9xxUWpMO5W7GFQvePmUiYJjN3kslMJvl+nqcP9N5zz++Xycz03t8995xZICIiIiIiIiJqcLPqnQARERERERER0USxwEFEREREREREDY8FDiIiIiIiIiJqeCxwEBEREREREVHDY4GDiIiIiIiIiBoeCxxERERERERE1PBY4CAiIiIiIiKihscCBxERERERERE1PBY4iIiIiIiIiKjhscBBRERERERERA2PBQ4iIiIiIiIiangscBARERERERFRw2OBg4iIiIiIiIgaHgscRERERERERNTwWOAgIiIiIiIioobHAgcRERERERERNTwWOIiIiIiIiIio4bHAQUREREREREQNjwUOIiIiIiIiImp4LHAQERERERERUcNjgYOIiIiIiIiIGh4LHERERERERETU8FjgICIiIiIiIqKGxwIHERERERERETU8FjiIiIiIiIiIqOGxwEFEREREREREDY8FDiIiIiIiIiJqeCxwEBEREREREVHDY4GDiIiIiIiIiBoeCxxERERERERE1PBm1zsBIiIimmZiHbMQ65hT7zSIiIhoZmGBg4iIiKqnc92J6Op7EV1929G57qp6p0NEREQzB++uEBERUXXEOnZDuvsBAHMBALsvXAKgH9n+TfVMi4iIiGYGjuAgIiKi6ogl9wDQVLR1YR0yISIiohmIBQ4iIiIiIiIiangscBARERERERFRw2OBg4iIiIiIiIgaHgscRERERERERNTwWOAgIiIiIiIioobHAgcRERERERERNbxZ9U6AiIiIaiDWMQ+x5IeR7v4QgMUAYth5SddGsgnAY+jp7kW270fI9j9f74SIiIiovljgICIims5iHU1IdZ+KeLIbwN"
                alt="Logo do DOU">
        </a>
    </div>